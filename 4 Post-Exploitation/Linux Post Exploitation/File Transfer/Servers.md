## FTP Server
We can set up an FTP Server in our attack host 

```shell
sudo pip3 install pyftpdlib
```

```shell-session
sudo python3 -m pyftpdlib --port 21 --write

[I 2022-05-17 10:09:19] concurrency model: async
[I 2022-05-17 10:09:19] masquerade (NAT) address: None
[I 2022-05-17 10:09:19] passive ports: None
[I 2022-05-17 10:09:19] >>> starting FTP server on 0.0.0.0:21, pid=3210 <<<
```

when ftping into the server - log in as user "anonymous", password ""

# Web Server
download
```
python -m http.server
```
 upload
```
sudo python3 -m pip install --user uploadserver
```

```
openssl req -x509 -out server.pem -keyout server.pem -newkey rsa:2048 -nodes -sha256 -subj '/CN=server'
```
create a new directory to host the certificate file that is not under the webserver 


```
mkdir https && cd https
```

```
sudo python3 -m uploadserver 443 --server-certificate ~/server.pem
```

# SMB Server
download
Setting up the SMB server
[smbserver.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/smbserver.py) from Impacket

first create a /tmp/smbshare and then give it 777
```shell-session
sudo impacket-smbserver -smb2support sharename /tmp/smbshare 

Impacket v0.9.22 - Copyright 2020 SecureAuth Corporation

[*] Config file parsed
[*] Callback added for UUID 4B324FC8-1670-01D3-1278-5A47BF6EE188 V:3.0
[*] Callback added for UUID 6BFFD098-A112-3610-9833-46C3F87E345A V:1.0
[*] Config file parsed
[*] Config file parsed
[*] Config file parsed
```
`-username` and `-password`


pload
Make ourselves SMB over HTTP with WebDav.WedbDAV
```shell-session
sudo pip3 install wsgidav cheroot
```

```shell-session
sudo wsgidav --host=0.0.0.0 --port=80 --root=/tmp --auth=anonymous 
```
the smb path will be \\ip.address\\DavWWWRoot
# Nginx
```shell-session
sudo mkdir -p /var/www/uploads/SecretUploadDirectory
```

```shell-session
sudo chown -R www-data:www-data /var/www/uploads/SecretUploadDirectory
```

Create file /etc/nginx/sites-available/upload.conf
```shell-session
server {
    listen 9001;
    
    location /SecretUploadDirectory/ {
        root    /var/www/uploads;
        dav_methods PUT;
    }
}
```

```shell-session
sudo ln -s /etc/nginx/sites-available/upload.conf /etc/nginx/sites-enabled/
```

Start nginx 
```shell-session
sudo systemctl restart nginx.service
```

If port 80 is already in used, there might be some problems 
all we need to do is to remove nginx default configurations 
```shell-session
sudo rm /etc/nginx/sites-enabled/default
```

Upload File using cURL 
```shell-session
curl -T /etc/passwd http://localhost:9001/SecretUploadDirectory/users.txt
```

