open as root
```
sudo msfconsole
```

```
search keyword


search type:exploit platform:windows cve:2021 rank:excellent microsoft
```


```
use number
```

To set RHOSTS, RPORT, etc
```
options
```

```
set VARAIBLE VALUE
```

we can also pick a specific target
```
show target
```

```
set target (target number)
```

```
exploit
```

Open shell
```
shell
```


# Setting a specific payload after exploit 

exploit -> gain initial access
payload -> to open the shell 

search for a specific type of payload
```
grep meterpreter show payloads
```
can stack the grep commands
```
grep meterpreter grep reverse_tcp show payloads
```

after selecting the exploit in the options we can 
```
set payload (payload number)
```


we can also do the same for encoders


# Using database

```
db_status 
```

create a new workspace or use existing workspace
```
workspace -h
```

import scannign result
```
db_import nmap_scan.xml
```
xml files are preferred

or just run the scan in msfconsole
```
db_nmap -sV -sS ip.address
```

exporting all the data
```
db_export -h
```

Other commands
use -h for more information
```
hosts
services
creds //credentials
loot
```


# Sessions
useful when we want to run an additional module on an already exploited system with a formed, stable communication channel 

```
sessions 
```

```
seesions -i [no.]
```

can use jobs to see active tasks running in the background
```
jobs -h 
```

```
exploit -j
```
run the exploit as a job

Meterpreter: 
```
hashdump
lsa_dump_sam
lsa_dump_secrets
```


# What to do when exploit is not installed on our machine 

Search on google 
```
software (version) exploit metasploit.github
```
then get the .rb exploit module file 

Then we can copy the code from the repo onto our local attack box and save it in the directory that msf is referencing 
`/usr/share/metasploit-framework`

```
locate exploits
```
find the directory then dumb the code inot a file 

```
msfconsole -m /usr/share/metasploit-framework/modules
```

in msfconsole
```
loadpath /usr/share/metasploit-framework/modules
reload_all
```

## or simply try updating it 
```
sudo apt update; sudo apt install metasploit-framework
```



